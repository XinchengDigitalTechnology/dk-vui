<script setup>
const props = defineProps({
  src: { type: [String, Array], default: '' }, // 图片url
  size: { type: String, default: '50px' }, // 图片尺寸
  list: { type: Array, default: () => { } }, // 放大列表
})

</script>

<template>
  <div class="v-image" :style="{ '--v-image-size': size }">
    <el-image v-if="Array.isArray(src)" :src="src[0]" :preview-src-list="src" v-bind="$attrs">
      <template #error>
        <svg class="v-image--error" width="75px" height="74px" viewBox="0 0 75 74" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
          <title>pic_fail</title>
          <g id="权限" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">
            <g id="缺省页" transform="translate(-1475.000000, -430.000000)" fill-rule="nonzero">
              <g id="编组-58备份" transform="translate(1475.917337, 430.000000)">
                <g id="编组-8" transform="translate(0.000000, 0.000000)">
                  <path
                    d="M44.7615861,18.9189189 L53.3947907,37.0888031 C53.4951768,37.3899614 53.5955629,37.6911197 53.5955629,37.992278 C53.5955629,39.0965251 52.692088,40 51.5878409,40 L31.2094625,40 C30.8079181,40 30.4063737,39.8996139 30.0048293,39.5984556 C29.1013544,38.996139 28.9005822,37.6911197 29.5028988,36.7876448 L31.711393,33.6756757 L41.2480726,18.7181467 C41.4488448,18.4169884 41.7500031,18.1158301 42.0511614,18.015444 C43.0550224,17.5135135 44.2596556,18.015444 44.7615861,18.9189189 Z M29.106976,27.8227017 L29.2017405,27.953668 L31.7314371,31.7829906 L30.8681979,33.138068 L28.6873917,36.2088978 C28.1005757,37.0886357 28.0167372,38.1822668 28.3794133,39.0967506 L22.3754857,39.0965251 C22.0743274,39.0965251 21.672783,38.996139 21.3716247,38.7953668 C20.4179567,38.223166 20.1890764,37.1073745 20.5989152,36.1365405 L20.668922,35.984556 L25.7886131,27.953668 L26.3909297,27.3513514 C27.3445977,26.7791506 28.4794625,27.0223359 29.106976,27.8227017 Z M28.3986517,14 C30.1052154,14 31.4102347,15.3050193 31.4102347,17.011583 C31.4102347,18.7181467 30.1052154,20.023166 28.3986517,20.023166 C26.692088,20.023166 25.3870687,18.7181467 25.3870687,17.011583 C25.3870687,15.3050193 26.692088,14 28.3986517,14 Z"
                    id="形状结合" fill="#DFDFDF"></path>
                  <g id="加载失败" transform="translate(13.444000, 46.136000)" fill="#D1D1D1">
                    <path
                      d="M10.488,1.848 L6.564,1.848 L6.564,10.884 L7.392,10.884 L7.392,10.08 L9.648,10.08 L9.648,10.884 L10.488,10.884 L10.488,1.848 Z M7.392,9.252 L7.392,2.676 L9.648,2.676 L9.648,9.252 L7.392,9.252 Z M2.148,0.096 L2.148,2.52 L0.228,2.52 L0.228,3.36 L2.148,3.36 C2.112,6.648 1.392,9.048 0,10.548 L0.636,11.112 C2.172,9.48 2.964,6.9 3.012,3.36 L4.608,3.36 C4.584,6.576 4.536,8.508 4.464,9.132 C4.368,9.816 4.008,10.164 3.396,10.164 C3.108,10.164 2.772,10.14 2.388,10.116 L2.604,10.908 C3.036,10.932 3.336,10.956 3.516,10.956 C4.572,10.956 5.16,10.452 5.28,9.468 C5.4,8.58 5.46,6.264 5.46,2.52 L3.012,2.52 L3.012,0.096 L2.148,0.096 Z"
                      id="形状"></path>
                    <path
                      d="M12.9,1.032 L12.9,1.824 L15.24,1.824 L15.24,2.928 L12.276,2.928 L12.276,3.708 L19.008,3.708 C19.08,4.788 19.212,5.712 19.38,6.504 C19.512,7.14 19.668,7.716 19.836,8.244 C19.224,9.168 18.48,9.864 17.616,10.344 L18.084,11.04 C18.876,10.608 19.584,9.996 20.208,9.18 C20.304,9.408 20.424,9.624 20.556,9.828 C21.024,10.548 21.468,10.92 21.876,10.92 C22.38,10.92 22.752,10.116 23.016,8.52 L22.272,8.124 C22.128,9.396 21.96,10.032 21.768,10.044 C21.576,10.044 21.324,9.744 21.012,9.156 C20.904,8.94 20.796,8.7 20.7,8.424 C21.3,7.416 21.792,6.156 22.176,4.656 L21.408,4.308 C21.144,5.436 20.796,6.444 20.364,7.308 C20.292,6.996 20.22,6.672 20.148,6.324 C20.016,5.652 19.92,4.776 19.848,3.708 L22.824,3.708 L22.824,2.928 L19.8,2.928 C19.752,2.064 19.728,1.092 19.728,0 L18.888,0 C18.888,1.056 18.912,2.028 18.96,2.928 L16.08,2.928 L16.08,1.824 L18.252,1.824 L18.252,1.032 L16.08,1.032 L16.08,0.024 L15.24,0.024 L15.24,1.032 L12.9,1.032 Z M20.964,0.156 L20.304,0.576 C20.904,1.236 21.372,1.836 21.708,2.376 L22.356,1.92 C22.032,1.416 21.564,0.828 20.964,0.156 Z M18.252,8.616 C17.664,8.688 17.04,8.76 16.38,8.832 L16.38,7.848 L18.204,7.848 L18.204,7.116 L16.38,7.116 L16.38,6.18 L15.528,6.18 L15.528,7.116 L13.98,7.116 C14.28,6.684 14.568,6.192 14.832,5.64 L18.312,5.64 L18.312,4.872 L15.168,4.872 C15.264,4.632 15.36,4.38 15.456,4.116 L14.628,3.96 C14.52,4.272 14.412,4.584 14.292,4.872 L12.636,4.872 L12.636,5.64 L13.956,5.64 C13.668,6.24 13.356,6.732 13.02,7.14 L13.188,7.848 L15.528,7.848 L15.528,8.916 C14.64,8.988 13.692,9.06 12.684,9.12 L12.792,9.924 C13.752,9.852 14.664,9.78 15.528,9.696 L15.528,11.028 L16.38,11.028 L16.38,9.612 C17.028,9.54 17.652,9.456 18.252,9.384 L18.252,8.616 Z"
                      id="形状"></path>
                    <path
                      d="M26.532,0.312 C25.992,1.92 25.188,3.204 24.108,4.164 L24.84,4.8 C25.356,4.32 25.824,3.72 26.256,3.012 L29.124,3.012 L29.124,3.792 C29.1,4.368 29.052,4.908 28.956,5.412 L24.312,5.412 L24.312,6.24 L28.776,6.24 C28.596,6.852 28.344,7.404 28.032,7.884 C27.288,8.88 25.968,9.684 24.096,10.308 L24.564,11.04 C26.46,10.428 27.816,9.576 28.644,8.484 C29.064,7.908 29.388,7.224 29.616,6.432 C30.264,8.376 31.896,9.9 34.512,11.028 L34.992,10.272 C32.484,9.312 30.936,7.968 30.348,6.24 L34.812,6.24 L34.812,5.412 L29.856,5.412 C29.94,4.908 29.988,4.368 30.012,3.792 L30.012,3.012 L34.032,3.012 L34.032,2.172 L30.012,2.172 L30.012,0.072 L29.124,0.072 L29.124,2.172 L26.7,2.172 C26.928,1.692 27.144,1.176 27.336,0.624 L26.532,0.312 Z"
                      id="路径"></path>
                    <path
                      d="M43.128,2.748 L45.3,2.748 C45.252,4.512 44.904,6.036 44.28,7.308 C43.608,6.132 43.176,4.74 42.996,3.132 C43.044,3.012 43.08,2.88 43.128,2.748 Z M42.456,4.416 C42.72,5.82 43.176,7.056 43.824,8.136 C43.248,9 42.504,9.732 41.592,10.308 L42.06,11.064 C42.96,10.464 43.716,9.744 44.316,8.88 C44.94,9.732 45.708,10.464 46.62,11.076 L47.088,10.26 C46.176,9.66 45.42,8.94 44.796,8.1 C45.612,6.636 46.044,4.86 46.104,2.748 L46.872,2.748 L46.872,1.92 L43.356,1.92 C43.488,1.368 43.608,0.768 43.704,0.12 L42.852,0.012 C42.612,2.124 42.048,3.768 41.172,4.932 L41.676,5.58 C41.964,5.256 42.216,4.872 42.456,4.416 Z M40.968,0.54 L36.54,0.54 L36.54,8.052 L37.332,8.052 L37.332,1.344 L40.176,1.344 L40.176,8.052 L40.968,8.052 L40.968,0.54 Z M39.588,8.4 L39.024,8.952 C39.732,9.684 40.284,10.368 40.68,11.016 L41.316,10.392 C40.848,9.732 40.272,9.072 39.588,8.4 Z M38.388,2.244 L38.388,5.904 C38.364,7.032 38.196,7.956 37.884,8.664 C37.548,9.336 36.948,9.888 36.108,10.296 L36.576,11.04 C37.464,10.608 38.112,10.008 38.52,9.228 C38.916,8.4 39.12,7.296 39.144,5.904 L39.144,2.244 L38.388,2.244 Z"
                      id="形状"></path>
                  </g>
                </g>
              </g>
            </g>
          </g>
        </svg>
      </template>
    </el-image>
    <el-image v-else :src="src" :preview-src-list="list || [src]" v-bind="$attrs">
      <template #error>
        <svg class="v-image--error" width="75px" height="74px" viewBox="0 0 75 74" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
          <title>pic_fail</title>
          <g id="权限" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">
            <g id="缺省页" transform="translate(-1475.000000, -430.000000)" fill-rule="nonzero">
              <g id="编组-58备份" transform="translate(1475.917337, 430.000000)">
                <g id="编组-8" transform="translate(0.000000, 0.000000)">
                  <path
                    d="M44.7615861,18.9189189 L53.3947907,37.0888031 C53.4951768,37.3899614 53.5955629,37.6911197 53.5955629,37.992278 C53.5955629,39.0965251 52.692088,40 51.5878409,40 L31.2094625,40 C30.8079181,40 30.4063737,39.8996139 30.0048293,39.5984556 C29.1013544,38.996139 28.9005822,37.6911197 29.5028988,36.7876448 L31.711393,33.6756757 L41.2480726,18.7181467 C41.4488448,18.4169884 41.7500031,18.1158301 42.0511614,18.015444 C43.0550224,17.5135135 44.2596556,18.015444 44.7615861,18.9189189 Z M29.106976,27.8227017 L29.2017405,27.953668 L31.7314371,31.7829906 L30.8681979,33.138068 L28.6873917,36.2088978 C28.1005757,37.0886357 28.0167372,38.1822668 28.3794133,39.0967506 L22.3754857,39.0965251 C22.0743274,39.0965251 21.672783,38.996139 21.3716247,38.7953668 C20.4179567,38.223166 20.1890764,37.1073745 20.5989152,36.1365405 L20.668922,35.984556 L25.7886131,27.953668 L26.3909297,27.3513514 C27.3445977,26.7791506 28.4794625,27.0223359 29.106976,27.8227017 Z M28.3986517,14 C30.1052154,14 31.4102347,15.3050193 31.4102347,17.011583 C31.4102347,18.7181467 30.1052154,20.023166 28.3986517,20.023166 C26.692088,20.023166 25.3870687,18.7181467 25.3870687,17.011583 C25.3870687,15.3050193 26.692088,14 28.3986517,14 Z"
                    id="形状结合" fill="#DFDFDF"></path>
                  <g id="加载失败" transform="translate(13.444000, 46.136000)" fill="#D1D1D1">
                    <path
                      d="M10.488,1.848 L6.564,1.848 L6.564,10.884 L7.392,10.884 L7.392,10.08 L9.648,10.08 L9.648,10.884 L10.488,10.884 L10.488,1.848 Z M7.392,9.252 L7.392,2.676 L9.648,2.676 L9.648,9.252 L7.392,9.252 Z M2.148,0.096 L2.148,2.52 L0.228,2.52 L0.228,3.36 L2.148,3.36 C2.112,6.648 1.392,9.048 0,10.548 L0.636,11.112 C2.172,9.48 2.964,6.9 3.012,3.36 L4.608,3.36 C4.584,6.576 4.536,8.508 4.464,9.132 C4.368,9.816 4.008,10.164 3.396,10.164 C3.108,10.164 2.772,10.14 2.388,10.116 L2.604,10.908 C3.036,10.932 3.336,10.956 3.516,10.956 C4.572,10.956 5.16,10.452 5.28,9.468 C5.4,8.58 5.46,6.264 5.46,2.52 L3.012,2.52 L3.012,0.096 L2.148,0.096 Z"
                      id="形状"></path>
                    <path
                      d="M12.9,1.032 L12.9,1.824 L15.24,1.824 L15.24,2.928 L12.276,2.928 L12.276,3.708 L19.008,3.708 C19.08,4.788 19.212,5.712 19.38,6.504 C19.512,7.14 19.668,7.716 19.836,8.244 C19.224,9.168 18.48,9.864 17.616,10.344 L18.084,11.04 C18.876,10.608 19.584,9.996 20.208,9.18 C20.304,9.408 20.424,9.624 20.556,9.828 C21.024,10.548 21.468,10.92 21.876,10.92 C22.38,10.92 22.752,10.116 23.016,8.52 L22.272,8.124 C22.128,9.396 21.96,10.032 21.768,10.044 C21.576,10.044 21.324,9.744 21.012,9.156 C20.904,8.94 20.796,8.7 20.7,8.424 C21.3,7.416 21.792,6.156 22.176,4.656 L21.408,4.308 C21.144,5.436 20.796,6.444 20.364,7.308 C20.292,6.996 20.22,6.672 20.148,6.324 C20.016,5.652 19.92,4.776 19.848,3.708 L22.824,3.708 L22.824,2.928 L19.8,2.928 C19.752,2.064 19.728,1.092 19.728,0 L18.888,0 C18.888,1.056 18.912,2.028 18.96,2.928 L16.08,2.928 L16.08,1.824 L18.252,1.824 L18.252,1.032 L16.08,1.032 L16.08,0.024 L15.24,0.024 L15.24,1.032 L12.9,1.032 Z M20.964,0.156 L20.304,0.576 C20.904,1.236 21.372,1.836 21.708,2.376 L22.356,1.92 C22.032,1.416 21.564,0.828 20.964,0.156 Z M18.252,8.616 C17.664,8.688 17.04,8.76 16.38,8.832 L16.38,7.848 L18.204,7.848 L18.204,7.116 L16.38,7.116 L16.38,6.18 L15.528,6.18 L15.528,7.116 L13.98,7.116 C14.28,6.684 14.568,6.192 14.832,5.64 L18.312,5.64 L18.312,4.872 L15.168,4.872 C15.264,4.632 15.36,4.38 15.456,4.116 L14.628,3.96 C14.52,4.272 14.412,4.584 14.292,4.872 L12.636,4.872 L12.636,5.64 L13.956,5.64 C13.668,6.24 13.356,6.732 13.02,7.14 L13.188,7.848 L15.528,7.848 L15.528,8.916 C14.64,8.988 13.692,9.06 12.684,9.12 L12.792,9.924 C13.752,9.852 14.664,9.78 15.528,9.696 L15.528,11.028 L16.38,11.028 L16.38,9.612 C17.028,9.54 17.652,9.456 18.252,9.384 L18.252,8.616 Z"
                      id="形状"></path>
                    <path
                      d="M26.532,0.312 C25.992,1.92 25.188,3.204 24.108,4.164 L24.84,4.8 C25.356,4.32 25.824,3.72 26.256,3.012 L29.124,3.012 L29.124,3.792 C29.1,4.368 29.052,4.908 28.956,5.412 L24.312,5.412 L24.312,6.24 L28.776,6.24 C28.596,6.852 28.344,7.404 28.032,7.884 C27.288,8.88 25.968,9.684 24.096,10.308 L24.564,11.04 C26.46,10.428 27.816,9.576 28.644,8.484 C29.064,7.908 29.388,7.224 29.616,6.432 C30.264,8.376 31.896,9.9 34.512,11.028 L34.992,10.272 C32.484,9.312 30.936,7.968 30.348,6.24 L34.812,6.24 L34.812,5.412 L29.856,5.412 C29.94,4.908 29.988,4.368 30.012,3.792 L30.012,3.012 L34.032,3.012 L34.032,2.172 L30.012,2.172 L30.012,0.072 L29.124,0.072 L29.124,2.172 L26.7,2.172 C26.928,1.692 27.144,1.176 27.336,0.624 L26.532,0.312 Z"
                      id="路径"></path>
                    <path
                      d="M43.128,2.748 L45.3,2.748 C45.252,4.512 44.904,6.036 44.28,7.308 C43.608,6.132 43.176,4.74 42.996,3.132 C43.044,3.012 43.08,2.88 43.128,2.748 Z M42.456,4.416 C42.72,5.82 43.176,7.056 43.824,8.136 C43.248,9 42.504,9.732 41.592,10.308 L42.06,11.064 C42.96,10.464 43.716,9.744 44.316,8.88 C44.94,9.732 45.708,10.464 46.62,11.076 L47.088,10.26 C46.176,9.66 45.42,8.94 44.796,8.1 C45.612,6.636 46.044,4.86 46.104,2.748 L46.872,2.748 L46.872,1.92 L43.356,1.92 C43.488,1.368 43.608,0.768 43.704,0.12 L42.852,0.012 C42.612,2.124 42.048,3.768 41.172,4.932 L41.676,5.58 C41.964,5.256 42.216,4.872 42.456,4.416 Z M40.968,0.54 L36.54,0.54 L36.54,8.052 L37.332,8.052 L37.332,1.344 L40.176,1.344 L40.176,8.052 L40.968,8.052 L40.968,0.54 Z M39.588,8.4 L39.024,8.952 C39.732,9.684 40.284,10.368 40.68,11.016 L41.316,10.392 C40.848,9.732 40.272,9.072 39.588,8.4 Z M38.388,2.244 L38.388,5.904 C38.364,7.032 38.196,7.956 37.884,8.664 C37.548,9.336 36.948,9.888 36.108,10.296 L36.576,11.04 C37.464,10.608 38.112,10.008 38.52,9.228 C38.916,8.4 39.12,7.296 39.144,5.904 L39.144,2.244 L38.388,2.244 Z"
                      id="形状"></path>
                  </g>
                </g>
              </g>
            </g>
          </g>
        </svg>
      </template>
    </el-image>
  </div>
</template>

<style lang="scss">
.v-image {
  .el-image {
    display: flex;
    align-items: center;
    justify-content: center;
    width: var(--v-image-size);
    height: var(--v-image-size);
    border-radius: 4px;
    overflow: hidden;
    border: 1px solid #f5f5f5;
  }

  .el-image__wrapper {
    position: relative;
    inset: 0;
  }

  .el-image__inner {
    width: auto;
    height: auto;
    max-width: var(--v-image-size);
    max-height: var(--v-image-size);
  }

  &--error {
    color: #dfdfdf;
    background-color: #fafafa;
    font-size: var(--v-image-size);
  }
}
</style>